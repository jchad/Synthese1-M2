<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>gKit2 light: Installation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">gKit2 light
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Installation</div>  </div>
</div><!--header-->
<div class="contents">
<h2><a class="anchor" id="autotoc_md0"></a>
obtenir les sources :</h2>
<p>créer un répertoire de travail, puis : </p><pre class="fragment">git clone https://forge.univ-lyon1.fr/Alexandre.Meyer/gkit2light.git
</pre><h2><a class="anchor" id="autotoc_md1"></a>
installer les dépendances :</h2>
<p>gKit2 utilise 3 librairies : sdl2 et sdl2_image, et glew, il faut les installer avant de pouvoir compiler les exemples.</p>
<p>les étapes sont légèrement différentes d'un système à l'autre. une fois les librairies installées, il faut générer les projets pour votre environnement de développement :</p><ul>
<li>visual studio ou code blocks pour windows,</li>
<li>makefile ou code blocks pour linux,</li>
<li>makefile ou xcode pour mac os.</li>
</ul>
<p>c'est l'outil premake qui permet de créer les projets, et les makefiles, cf section premake.</p>
<h2><a class="anchor" id="autotoc_md2"></a>
linux</h2>
<p>installez les paquets, si nécessaire (pas la peine au nautibus) : libsdl2-dev, libsdl2-image-dev, libglew-dev et premake4</p>
<p>par exemple, pour ubuntu et ses variantes : </p><pre class="fragment">sudo apt-get install libsdl2-dev libsdl2-image-dev libglew-dev premake4
</pre><h2><a class="anchor" id="autotoc_md3"></a>
windows</h2>
<p>les librairies sont disponibles :</p><ul>
<li><a href="http://glew.sourceforge.net/">glew</a></li>
<li><a href="https://www.libsdl.org/download-2.0.php">sdl2</a>, section development libraries</li>
<li><a href="https://www.libsdl.org/projects/SDL_image/">sdl2_image</a>, section development libraries</li>
</ul>
<p>plusieurs versions de premake pour visual studio sont disponibles :</p><ul>
<li>pour générer des projets Visual Studio 2015 et 2017 : <a href="http://premake.github.io/download.html">premake 5</a>, copiez le dans le répertoire des sources de gKit</li>
</ul>
<h3><a class="anchor" id="autotoc_md4"></a>
installation rapide</h3>
<p>les librairies et premake4/5 sont regroupées dans une archive <a href="http://perso.univ-lyon1.fr/jean-claude.iehl/Public/educ/M1IMAGE/extern_mingw_visual.zip">disponible ici</a>.</p>
<p>il suffit de dezipper l'archive dans le répertoire de gKit, <b>et ensuite de copier les dll et la version de premake</b> que vous allez utiliser dans le répertoire de gKit ou <code>./bin</code> :</p><ul>
<li>pour utiliser codeblocks : copiez <code>extern/mingw/bin</code></li>
<li>pour utiliser visual studio 2015 et 2017 : copiez <code>extern/visual/bin</code></li>
</ul>
<p>les répertoires doivent avoir la structure détaillée ci-dessous.</p>
<h3><a class="anchor" id="autotoc_md5"></a>
SDK windows</h3>
<p>premake ne connait pas la version du windows sdk actuellement installé sur votre machine, par défaut, il génère des projets pour le sdk de windows 8.1. si cette version du sdk n'est pas installée, <b>pas de panique</b> : ouvrez la solution générée, dans visual studio : ouvrez le solution explorer, click droit sur solution et choisissez <code>re-cibler la solution</code> / <code>retarget solution</code>. vous pouvez maintenant compiler un projet.</p>
<h3><a class="anchor" id="autotoc_md6"></a>
installation manuelle</h3>
<p>le plus simple est de créer un sous répertoire, <code>extern</code> par exemple, et d'y copier les fichiers <code>.h</code>, <code>.dll</code> et <code>.lib</code>. vous devez obtenir une structure :</p>
<div class="fragment"><div class="line">gKit2light/</div>
<div class="line">    premake4/5</div>
<div class="line">    premake4.lua</div>
<div class="line">    </div>
<div class="line">    data/</div>
<div class="line">        shaders/</div>
<div class="line">        ...</div>
<div class="line">    ...</div>
<div class="line">    </div>
<div class="line">    tutos/</div>
<div class="line">    ...</div>
<div class="line">    </div>
<div class="line">    src/</div>
<div class="line">        gKit/</div>
<div class="line">        ...</div>
<div class="line">    </div>
<div class="line">    bin/</div>
<div class="line">        glew32.dll</div>
<div class="line">        SDL2.dll</div>
<div class="line">        SDL2_image.dll</div>
<div class="line">        libjpeg.dll etc</div>
<div class="line">    </div>
<div class="line">    <span class="keyword">extern</span>/</div>
<div class="line">        mingw/ ou visual/</div>
<div class="line">            bin/</div>
<div class="line">            </div>
<div class="line">            include/</div>
<div class="line">                SDL2/</div>
<div class="line">                    SDL.h</div>
<div class="line">                    SDL_image.h</div>
<div class="line">                    ...</div>
<div class="line">                </div>
<div class="line">                GL/</div>
<div class="line">                    glew.h</div>
<div class="line">                    ...</div>
<div class="line">                </div>
<div class="line">            lib/</div>
<div class="line">                glew32.lib</div>
<div class="line">                SDL2.lib</div>
<div class="line">                SDL2_image.lib</div>
<div class="line">                SDL2_main.lib</div>
<div class="line">                ...</div>
</div><!-- fragment --><p>il faudra modifier le fichier premake4.lua avec le chemin d'accès à ce répertoire, si vous n'utilisez pas cette solution. cf section premake.</p>
<h2><a class="anchor" id="autotoc_md7"></a>
mac os</h2>
<p>les librairies sont disponibles :</p><ul>
<li><a href="https://www.libsdl.org/download-2.0.php">sdl2</a>, section development libraries</li>
<li><a href="https://www.libsdl.org/projects/SDL_image/">sdl2_image</a>, section development libraries</li>
<li>glew n'est pas necessaire sur mac os.</li>
</ul>
<p>copier le contenu des fichiers .dmg dans <code>/Library/Frameworks</code></p>
<p>premake4 est disponible :</p><ul>
<li><a href="http://premake.github.io/download.html">premake 4.4</a></li>
</ul>
<p>copiez le dans le répertoire des sources de gKit</p>
<h1><a class="anchor" id="autotoc_md8"></a>
premake :</h1>
<p>ouvrez un terminal, et naviguez jusqu'au répertoire contenant gKit :</p><ul>
<li>windows : cherchez <code>powershell</code> dans le menu démarrer</li>
<li>linux : <code>ctrl</code>-<code>alt</code>-<code>t</code>,</li>
<li>mac os : cherchez <code>terminal</code></li>
</ul>
<p><em>rappel :</em> commandes <code>ls</code> et <code>cd</code> pour naviguer.</p>
<p>éxecuter premake4 &ndash;help, la suite devrait être assez évidente.</p>
<ul>
<li>si vous voulez générer un projet visual studio, il suffit de choisir la bonne version,<ul>
<li><code>./premake5 vs2015</code></li>
<li><code>./premake5 vs2017</code></li>
</ul>
</li>
</ul>
<p>la solution visual studio ainsi que les projets sont crées dans le répertoire <code>build/</code></p>
<ul>
<li>pour code blocks...<ul>
<li><code>./premake4 codeblocks</code></li>
</ul>
</li>
<li>pour xcode...<ul>
<li><code>./premake4 xcode</code></li>
</ul>
</li>
<li>pour des makefile (linux et mac os)...<ul>
<li><code>./premake4 gmake</code></li>
</ul>
</li>
</ul>
<p>vous pouvez maintenant ouvrir la solution visual studio, le projet xcode, code blocks et compiler shader_kit ou un des tutos.</p>
<h2><a class="anchor" id="autotoc_md9"></a>
utilisation des makefiles</h2>
<p>les makefile peuvent générer les versions debug (cf utiliser gdb ou lldb) ou les versions release, plus rapide (2 ou 3 fois, interressant pour les projets avec beaucoup de calculs) :</p><ul>
<li><code>make help</code>, affiche la liste des projets et les options disponibles,</li>
<li><code>make shader_kit</code>, compile la version debug de shader_kit,</li>
<li><code>make shader_kit config=release64</code>, compile la version release, 64bits, de shader_kit,</li>
<li><code>make shader_kit config=debug64</code>, compile la version debug, 64bits, de shader_kit,</li>
<li><code>make shader_kit verbose=1</code>, compile la version debug de shader_kit et affiche le détail des commandes exécutées.</li>
</ul>
<h1><a class="anchor" id="autotoc_md10"></a>
premake et les projets :</h1>
<p>pour ajouter un nouveau projet, le plus simple est de modifier premake4.lua et de regénérer le projet complet.</p>
<p>il y a 2 solutions :</p><ul>
<li>pour un projet avec 1 seul fichier .cpp</li>
<li>pour un projet composé de plusieurs fichiers .cpp</li>
</ul>
<h2><a class="anchor" id="autotoc_md11"></a>
projet en 1 fichier .cpp</h2>
<p>le plus simple est l'ajouter à la liste des projets, modifiez : </p><pre class="fragment">-- description des projets      
local projects = {
    "shader_kit"
}
</pre><p>et ajoutez le votre, sans l'extension .cpp, par exemple tp1 : </p><pre class="fragment">local projects = {
    "shader_kit",
    "tp1"
}
</pre><p>et regénérez le projet, cf premake4 gmake / vs2013 / xcode ...</p>
<h2><a class="anchor" id="autotoc_md12"></a>
projet avec plusieurs fichiers .cpp</h2>
<p>ajoutez la description de votre projet : </p><pre class="fragment">project("tp1")
    language "C++"
    kind "ConsoleApp"
    targetdir "bin"
    files ( gkit_files )
    files { "tp1_main.cpp", "tp1_scene.cpp", "tp1_render.cpp" }
</pre><h2><a class="anchor" id="autotoc_md13"></a>
regénérez le projet,</h2>
<p>cf premake gmake / vs2017 / xcode ...</p>
<h1><a class="anchor" id="autotoc_md14"></a>
FAQ :</h1>
<h2><a class="anchor" id="autotoc_md15"></a>
erreur horrible dans src/gKit/window.cpp :</h2>
<p>selon la version glew, le type du dernier paramètre de la fonction <a class="el" href="window_8cpp.html">window.cpp</a>/debug change, il suffit d'ajouter un <code>const</code> dans la déclaration du dernier paramètre.</p>
<div class="fragment"><div class="line">ligne 230 :</div>
<div class="line"><span class="keyword">static</span></div>
<div class="line"><span class="keywordtype">void</span> GLAPIENTRY debug( GLenum source, GLenum type, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <span class="keywordtype">id</span>, GLenum severity, GLsizei <a class="code" href="group__math.html#gaf34f93c25b062fad7f99a1e02d88a423">length</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *message, </div>
<div class="line">        <span class="keywordtype">void</span> *userParam )</div>
</div><!-- fragment --><p>à remplacer par :</p>
<div class="fragment"><div class="line"><span class="keyword">static</span></div>
<div class="line"><span class="keywordtype">void</span> GLAPIENTRY debug( GLenum source, GLenum type, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <span class="keywordtype">id</span>, GLenum severity, GLsizei <a class="code" href="group__math.html#gaf34f93c25b062fad7f99a1e02d88a423">length</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *message, </div>
<div class="line">        <span class="keyword">const</span> <span class="keywordtype">void</span> *userParam ) <span class="comment">//!&lt; const </span></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md16"></a>
erreur lors du link / édition de liens :</h2>
<p>par défaut les projets essayent de générer la version 32bits des applications, selon votre système, ce n'est pas possible ou obligatoire...</p>
<p>configurations générées :</p><ul>
<li>windows codeblocks : utilisez la version 32 bits, 64 bits n'existe pas (limitation de gcc pour windows ?)</li>
<li>windows visual studio 2015 et 2017, utilisez la version 64bits des librairies</li>
<li>linux codeblocks : utilisez la même version que votre système. cf panneau de configuration / details</li>
<li>mac os : les frameworks contiennent les 2 versions. </li>
</ul>
</div><!-- contents -->
<div class="ttc" id="agroup__math_html_gaf34f93c25b062fad7f99a1e02d88a423"><div class="ttname"><a href="group__math.html#gaf34f93c25b062fad7f99a1e02d88a423">length</a></div><div class="ttdeci">float length(const Vector &amp;v)</div><div class="ttdoc">renvoie la longueur d'un vecteur.</div><div class="ttdef"><b>Definition:</b> <a href="vec_8cpp_source.html#l00142">vec.cpp:142</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Sep 9 2019 15:39:10 for gKit2 light by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.16
</small></address>
</body>
</html>
